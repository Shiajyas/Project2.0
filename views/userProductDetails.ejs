<%- include('./partials/header') %>

<style>
    
    .product-image-container {
        margin-top: 10px;
        position: relative;
        overflow: hidden;
    }

    .main-image {
        width: 320px;
        height: 320px;
        max-width: 600px;
        display: block;
        margin: 0 auto;
        cursor: zoom-in; /* Added cursor property for better indication */
        transition: transform 0.5s;
    }

    .main-image.zoomed {
        transform: scale(2);
    }

    .additional-images {
        margin-top: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .additional-image-button {
        width: 80px;
        height: 80px;
        margin: 0 5px;
        cursor: pointer;
        border: none;
        background: none;
        transition: opacity 0.3s ease-in-out;
    }

    .additional-image {
        width: 100%;
        height: auto;
        border: 1px solid #ddd;
        cursor: pointer;
        transition: opacity 0.3s ease-in-out;
    }

    .additional-image:hover,
    .additional-image-button:hover {
        opacity: 0.7;
    }
</style>

<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html" rel="nofollow">Home</a>
                <span></span> Fashion
                <span></span> Abstract Print Patchwork Dress
            </div>
        </div>
    </div>
    <section class="mt-50 mb-50">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <div class="product-detail accordion-detail">
                        <div class="row mb-50">
                            <!-- Product Images -->
                            <div class="col-md-6 col-sm-12 col-xs-12">
                                <div class="detail-gallery">
                                    <img src="<%= products.images[0] %>" class="main-image img-fluid " id="img-container" alt="Product Image" onclick="toggleZoom(event)">
                                    <div class="additional-images">
                                        <!-- Loop through additional images -->
                                        <% for (let index = 0; index < products.images.length; index++) { %>
                                            <button class="additional-image-button" onclick="changeImage('<%= index %>')">
                                                <img src="<%= products.images[index] %>" class="additional-image" alt="Additional Image <%= index + 1 %>">
                                            </button>
                                        <% } %>
                                    </div>
                                </div>
                                <!-- Social Icons -->
                                <div class="social-icons single-share">
                                    <ul class="text-grey-5 d-inline-block">
                                        <li><strong class="mr-10">Share this:</strong></li>
                                        <li class="social-facebook"><a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a></li>
                                        <li class="social-twitter"> <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a></li>
                                        <li class="social-instagram"><a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a></li>
                                        <li class="social-linkedin"><a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- End Product Images -->
    
                            <!-- Detail Info -->
                            <div class="col-md-6 col-sm-12 col-xs-12">
                                <div class="detail-info">
                                    <h2 class="title-detail"><%= products.name %></h2>
                                    <!-- Product Ratings -->
                                    <div class="product-detail-rating">
                                        <div class="pro-details-brand">
                                            <span> Brands: <a href="shop-grid-right.html"><%= products.brand %></a> </span>
                                         
                                        </div>
                                        <div class="product-rate-cover text-end">
                                            <div class="product-rate d-inline-block">
                                                <div class="product-rating" style="width:90%">
                                                </div>
                                            </div>
                                            <span class="font-small ml-5 text-muted">(<%= products.status %> reviews)</span>
                                        </div>
                                    </div>
                                    <!-- Product Prices -->
                                    <div class="clearfix product-price-cover">
                                        <div class="product-price primary-color float-left">
                                            <ins><span class="text-brand">Rs: <%= products.price %></span></ins>
                                            <ins><span class="old-price font-md ml-15">$200.00</span></ins>
                                            <span class="save-price  font-md color3 ml-15">25% Off</span>
                                        </div>
                                    </div>
                                    <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                    <!-- Short Description -->
                                    <div class="short-desc mb-30">
                                        <p><%= products.richdescription %></p>
                                    </div>
                                    <!-- Product Information -->
                                    <div class="product_sort_info font-xs mb-30">
                                        <ul>
                                            <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year AL Jazeera Brand Warranty</li>
                                            <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                            <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                        </ul>
                                    </div>
                                    <!-- Color and Size Options -->
                               
                                    <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                    <!-- Quantity and Action Buttons -->
                                    <div class="detail-extralink">
                                        <div class="detail-qty border radius">
                                            <a href="#" class="qty-down"><i class="fi-rs-angle-small-down"></i></a>
                                            <span class="qty-val">1</span>
                                            <a href="#" class="qty-up"><i class="fi-rs-angle-small-up"></i></a>
                                        </div>
                                        <div class="product-extra-link2">
                                            <button type="submit" class="button button-add-to-cart"onclick="addToCart('<%= products._id%>')">Add to cart</a> </button>
                                            <a aria-label="Add To Wishlist" class="action-btn hover-up" href="shop-wishlist.html"><i class="fi-rs-heart"></i></a>
                                            <a aria-label="Compare" class="action-btn hover-up" href="shop-compare.html"><i class="fi-rs-shuffle"></i></a>
                                        </div>
                                    </div>
                                    <!-- Product Meta Information -->
                                    <ul class="product-meta font-xs color-grey mt-50">
                                        <li class="mb-5">SKU: <a href="#">FWM15VKT</a></li>
                                        <li class="mb-5">Tags: <a href="#" rel="tag">Cloth</a>, <a href="#" rel="tag">Women</a>, <a href="#" rel="tag">Dress</a> </li>
                                        <li>Availability:<span class="in-stock text-success ml-5">8 Items In Stock</span></li>
                                    </ul>
                                </div>
                                <!-- End Detail Info -->
                            </div>
                        </div>
    </section>
</main>
<footer class="main">
    <section class="newsletter p-30 text-white wow fadeIn animated">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-7 mb-md-3 mb-lg-0">
                    <div class="row align-items-center">
                        <div class="col flex-horizontal-center">
                            <img class="icon-email" src="assets/imgs/theme/icons/icon-email.svg" alt="">
                            <h4 class="font-size-20 mb-0 ml-3">Sign up to Newsletter</h4>
                        </div>
                        <div class="col my-4 my-md-0 des">
                            <h5 class="font-size-15 ml-4 mb-0">...and receive <strong>$25 coupon for first shopping.</strong></h5>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <!-- Subscribe Form -->
                    <form class="form-subcriber d-flex wow fadeIn animated">
                        <input type="email" class="form-control bg-white font-small" placeholder="Enter your email">
                        <button class="btn bg-dark text-white" type="submit">Subscribe</button>
                    </form>
                    <!-- End Subscribe Form -->
                </div>
            </div>
        </div>
    </section>
    <section class="section-padding footer-mid">
        <div class="container pt-15 pb-20">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="widget-about font-md mb-md-5 mb-lg-0">
                        <div class="logo logo-width-1 wow fadeIn animated">
                            <a href="index.html"><img src="assets/imgs/theme/logo.svg" alt="logo"></a>
                        </div>
                        <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                        <p class="wow fadeIn animated">
                            <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                        </p>
                        <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                        <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                            <a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3">
                    <h5 class="widget-title wow fadeIn animated">About</h5>
                    <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Delivery Information</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms &amp; Conditions</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Support Center</a></li>
                    </ul>
                </div>
                <div class="col-lg-2  col-md-3">
                    <h5 class="widget-title wow fadeIn animated">My Account</h5>
                    <ul class="footer-list wow fadeIn animated">
                        <li><a href="#">Sign In</a></li>
                        <li><a href="#">View Cart</a></li>
                        <li><a href="#">My Wishlist</a></li>
                        <li><a href="#">Track My Order</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Order</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5 class="widget-title wow fadeIn animated">Install App</h5>
                    <div class="row">
                        <div class="col-md-8 col-lg-12">
                            <p class="wow fadeIn animated">From App Store or Google Play</p>
                            <div class="download-app wow fadeIn animated">
                                <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active" src="assets/imgs/theme/app-store.jpg" alt=""></a>
                                <a href="#" class="hover-up"><img src="assets/imgs/theme/google-play.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                            <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                            <img class="wow fadeIn animated" src="assets/imgs/theme/payment-method.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container pb-20 wow fadeIn animated">
        <div class="row">
            <div class="col-12 mb-20">
                <div class="footer-bottom"></div>
            </div>
            <div class="col-lg-6">
                <p class="float-md-left font-sm text-muted mb-0">&copy; 2022, <strong class="text-brand">Evara</strong> - HTML Ecommerce Template </p>
            </div>
            <div class="col-lg-6">
                <p class="text-lg-end text-start font-sm text-muted mb-0">
                    Designed by <a href="http://alithemes.com/" target="_blank">Alithemes.com</a>. All rights reserved
                </p>
            </div>
        </div>
    </div>
</footer>
<!-- Preloader Start -->
<div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
            <div class="text-center">
                <h5 class="mb-5">Now Loading</h5>
                <div class="loader">
                    <div class="bar bar1"></div>
                    <div class="bar bar2"></div>
                    <div class="bar bar3"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
    function addToCart(prodId) {
        
        var stock = 1;
        $.ajax({
            url: `/user/addcart?id=${prodId}`,
            method: "post",
            data: {
                stock: stock
            },
            success: (res) => {
                if (res.status === true) {

                    Swal.fire({
                        title: 'Added to Cart!',
                        text: 'Continue Shopping',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    })
                } else if (res.status === "Out of stock") {
                    Swal.fire({
                        title: 'Stock!!',
                        text: "The product is out of stock",
                        icon: 'error', // Corrected from 'fail' to 'error'
                        timer: 2000,
                    })
                } else {
                    Swal.fire({
                        title: 'You need to Login first',
                        text: 'Continue Shopping',
                        icon: 'warning',
                        timer: 2000,
                        showConfirmButton: false
                    }).then(() => { window.location.href = '/user/login' });
                }
            },
            error: (err) => {
                console.error(err, "hello");
                alert("error occured")
            }
        });
    }
</script>

<script>

function addToWishlist(productId){
    $.ajax({
        url : "/user/addwishlist",
        method : "post",
        data : {
            productId : productId
        },
        success : (response)=>{
            if(response.status == true){
                Swal.fire({
                                title: 'Added to Wishlist!',
                                text: 'Continue Shopping',
                                icon: 'success',
                                timer: 2000,
                                showConfirmButton: false
                            })
            }else if(response.status == false){
                Swal.fire({
                                title: 'You need to Login first',
                                text: 'Continue Shopping',
                                icon: 'warning',
                                timer: 2000,
                                showConfirmButton: false
                            }).then(() => { window.location.href = '/user/login' });
            }
        }
    })
    return false;
}


function getCurrentPageFromURL(element) {
    
    const url = window.location.href;
    const match = url.match(/page=(\d+)/);

    if (match && match[1]) {
        return parseInt(match[1], 10);
    }

    return 1;
}


function handleSortChange(selectedOption){
    // console.log(selectedOption);
    let option = selectedOption;
    $.ajax({
        url: "/sortProducts",
        method: "POST",
        data: {
            option: option,
            // page: page
        },
        success: (response) => {
            if (response.status === true) {
                // Assuming the server returns an array of products in response.data
                const sortedProducts = response.data;
                console.log(sortedProducts);
                // Clear existing product grid content
                $(".product-grid-3").empty();
                // $(".pagination").empty();

                // Render each product in the container
                sortedProducts.currentProduct.forEach((product) => {
                    const productDiv = $("<div class='col-lg-4 col-md-4 col-12 col-sm-6'>" +
                        "<div class='product-cart-wrap mb-30'>" +
                        "<div class='product-img-action-wrap'>" +
                        "<div class='product-img product-img-zoom'>" +
                        "<a href='/productDetails?id=" + product.id + "'>" +
                        "<img class='default-img' src='/uploads/product-images/" + product.productImage[0] + "' alt=''>" +
                        "</a>" +
                        "</div>" +
                        "<div class='product-action-1'>" +
                        "<a aria-label='Add To Wishlist' class='action-btn hover-up' href='javascript:void(0);' onclick='addToWishlist(\"" + product._id + "\")'>" +
                        "<i class='fi-rs-heart'></i>" +
                        "</a>" +
                        "</div>" +
                        "<div class='product-badges product-badges-position product-badges-mrg'>" +
                        "<span class='hot'>Hot</span>" +
                        "</div>" +
                        "</div>" +
                        "<div class='product-content-wrap'>" +
                        "<div class='product-category'>" +
                        "<a href='shop-grid-right.html'>" + product.brand + "</a>" +
                        "</div>" +
                        "<h2><a href='shop-product-right.html'>" + product.productName + "</a></h2>" +
                        "<div class='product-price'>" +
                        "<span>₹" + product.salePrice.toLocaleString('en-IN') + "</span>" +
                        "<span class='old-price'>₹" + product.regularPrice.toLocaleString('en-IN') + "</span>" +
                        "</div>" +
                        "<div class='product-action-1 show'>" +
                        "<a aria-label='Add To Cart' class='action-btn hover-up' href='shop-cart.html'>" +
                        "<i class='fi-rs-shopping-bag-add'></i>" +
                        "</a>" +
                        "</div>" +
                        "</div>" +
                        "</div>" +
                        "</div>");

                    // Append the productDiv to the product grid
                    $(".product-grid-3").append(productDiv);
                    // $("#pagination").html(response.data.totalPages);
                });
            } else {
                console.error("Error in sorting products:", response);
            }
        }
    });
}






    
</script>
<!-- Vendor JS-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
<script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
<script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
<script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
<script src="assets/js/plugins/slick.js"></script>
<script src="assets/js/plugins/jquery.syotimer.min.js"></script>
<script src="assets/js/plugins/wow.js"></script>
<script src="assets/js/plugins/jquery-ui.js"></script>
<script src="assets/js/plugins/perfect-scrollbar.js"></script>
<script src="assets/js/plugins/magnific-popup.js"></script>
<script src="assets/js/plugins/select2.min.js"></script>
<script src="assets/js/plugins/waypoints.js"></script>
<script src="assets/js/plugins/counterup.js"></script>
<script src="assets/js/plugins/jquery.countdown.min.js"></script>
<script src="assets/js/plugins/images-loaded.js"></script>
<script src="assets/js/plugins/isotope.js"></script>
<script src="assets/js/plugins/scrollup.js"></script>
<script src="assets/js/plugins/jquery.vticker-min.js"></script>
<script src="assets/js/plugins/jquery.theia.sticky.js"></script>
<script src="assets/js/plugins/jquery.elevatezoom.js"></script>
<!-- Template  JS -->
<script src="assets/js/maind134.js?v=3.4"></script>
<script src="assets/js/shopd134.js?v=3.4"></script>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    var $jq = jQuery.noConflict();

    function toggleZoom(event) {
        let imgElement = document.getElementById('img-container');
        imgElement.classList.toggle('zoomed');

        // Calculate position difference between cursor and image
        var boundingRect = imgElement.getBoundingClientRect();
        var cursorX = event.clientX - boundingRect.left;
        var cursorY = event.clientY - boundingRect.top;

        if (imgElement.classList.contains('zoomed')) {
            imgElement.style.transformOrigin = cursorX + 'px ' + cursorY + 'px';
        }
    }

    function changeImage(index) {
        var imageUrl = $jq('.additional-image').eq(index).attr('src');
        $jq('#img-container').attr('src', imageUrl);
        resetZoom();
    }

    function resetZoom() {
        let imgElement = document.getElementById('img-container');
        imgElement.classList.remove('zoomed');
    }
</script>

</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/shop-product-right.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Jul 2023 10:10:05 GMT -->
</html>